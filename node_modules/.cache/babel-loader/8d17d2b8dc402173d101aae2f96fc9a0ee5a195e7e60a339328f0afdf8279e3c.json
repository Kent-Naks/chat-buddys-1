{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useLocation}from'react-router-dom';import'./ChatConversation.css';// Importing the CSS file\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function ChatConversation(){const{id}=useParams();const location=useLocation();const queryParams=new URLSearchParams(location.search);const topic=queryParams.get('topic');const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[questions,setQuestions]=useState([]);const[questionIndex,setQuestionIndex]=useState(0);useEffect(()=>{fetch(`http://localhost:3000/conversations/${id}?topic=${topic}`).then(response=>response.json()).then(data=>setMessages(data));// Fetch buddy's questions\nfetch(`http://localhost:3000/buddies/${id}`).then(response=>response.json()).then(data=>setQuestions(data.questions||[]));},[id,topic]);const handleSubmit=e=>{e.preventDefault();// Add user's message\nconst newMessage={text:input};setMessages([...messages,newMessage]);// Display the next question\nif(questionIndex<questions.length){setMessages(prevMessages=>[...prevMessages,newMessage,{text:questions[questionIndex]}]);setQuestionIndex(questionIndex+1);}else{setMessages(prevMessages=>[...prevMessages,newMessage]);}setInput('');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Conversation on \",topic]}),/*#__PURE__*/_jsx(\"div\",{children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"p\",{children:msg.text},index))}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send\"})]})]});}export default ChatConversation;","map":{"version":3,"names":["React","useState","useEffect","useParams","useLocation","jsxs","_jsxs","jsx","_jsx","ChatConversation","id","location","queryParams","URLSearchParams","search","topic","get","messages","setMessages","input","setInput","questions","setQuestions","questionIndex","setQuestionIndex","fetch","then","response","json","data","handleSubmit","e","preventDefault","newMessage","text","length","prevMessages","children","map","msg","index","onSubmit","type","value","onChange","target","placeholder"],"sources":["/home/ibachmeier/development/phase-2/chat-buddys-1/src/ChatConversation.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useLocation } from 'react-router-dom';\nimport './ChatConversation.css';  // Importing the CSS file\n\nfunction ChatConversation() {\n  const { id } = useParams();\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const topic = queryParams.get('topic');\n  \n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [questions, setQuestions] = useState([]);\n  const [questionIndex, setQuestionIndex] = useState(0);\n\n  useEffect(() => {\n    fetch(`http://localhost:3000/conversations/${id}?topic=${topic}`)\n      .then(response => response.json())\n      .then(data => setMessages(data));\n\n    // Fetch buddy's questions\n    fetch(`http://localhost:3000/buddies/${id}`)\n      .then(response => response.json())\n      .then(data => setQuestions(data.questions || []));\n  }, [id, topic]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // Add user's message\n    const newMessage = { text: input };\n    setMessages([...messages, newMessage]);\n\n    // Display the next question\n    if (questionIndex < questions.length) {\n      setMessages(prevMessages => [...prevMessages, newMessage, { text: questions[questionIndex] }]);\n      setQuestionIndex(questionIndex + 1);\n    } else {\n      setMessages(prevMessages => [...prevMessages, newMessage]);\n    }\n\n    setInput('');\n  };\n\n  return (\n    <div>\n      <h1>Conversation on {topic}</h1>\n      <div>\n        {messages.map((msg, index) => (\n          <p key={index}>{msg.text}</p>\n        ))}\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input \n          type=\"text\" \n          value={input} \n          onChange={(e) => setInput(e.target.value)} \n          placeholder=\"Type a message...\" \n        />\n        <button type=\"submit\">Send</button>\n      </form>\n    </div>\n  );\n}\n\nexport default ChatConversation;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}